using UnityEngine;
//using Application;
using System.Collections;

public class AssemblyLine: MonoBehaviour {

    public List<GameObject> pool;
    public GameObject position1;	
    public GameObject position2;	
    public GameObject position3;	
    public GameObject position4;	

    public GameObject actor1;	
    public GameObject actor2;	
    public GameObject actor3;	
    public GameObject actor4;	
	
    float timeSave;

    GameObject[] positions;
    public int profit = 0;

    public void Start() {

        timeSave = Time.time;

        positions = new GameObject[4] { actor1, actor2, actor3, actor4 } ;

        assignPositions();

        pool = new List<GameObjects>();
    }
    
    void assignPositions() {
        positions[0].transform.position = position1.transform.position;
        positions[1].transform.position = position2.transform.position;
        positions[2].transform.position = position3.transform.position;
        positions[3].transform.position = position4.transform.position;
    }

    void getRandomActor() {
        float randomNum = UnityEngine.Random.Range(0,1);
    }

    void rotatePositions() {
        GameObject lastActor = positions[positions.Length - 1];
        moveToPool(lastActor);
        for (int i= positions.Length -1; i > 0; i--) {
            positions[i] = positions[i-1];
        }
        //positions[0] = getRandomActor();
        assignPositions();
    }

    void moveToPool(GameObject g) {
        g.SetActive(false);
        pool.Add(g);
    }

    void updateProfit() {
        if (positions[positions.Length - 1].name.Contains("man")) {
            profit++;
        }
    }

    public float interval = 1f; // seconds between changing positions

	public void Update()
	{
        float t = Time.time;
        if (t - timeSave >= interval) {
            rotatePositions();
            updateProfit();
            timeSave = Time.time;
        }
	}
}
